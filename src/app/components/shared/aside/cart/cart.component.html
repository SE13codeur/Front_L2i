<div class="container">
  <h1>Votre panier</h1>

  <div class="cart-grid">
    <div *ngFor="let item of (cartItems$ | async); let i = index" class="cart-item">
      <img [src]="item.imageUrl" alt="{{item.title}}">
      <div class="item-info">
        <h2>{{item.title}}</h2>
        <p>{{item.category.name}}</p>
        <p><small class="text-muted">Prix en euros: {{item.regularPrice | currency:'EUR':true}}</small></p>
        <app-cart-item-quantity [item]="item"></app-cart-item-quantity>
        <button (click)="removeItemFromCart(item.id)">Supprimer</button>
      </div>
    </div>

    <div class="cart-summary">
      <h3>Total d'articles dans le panier: <span *ngIf="(totalItems$ | async) as totalItemsInCart">{{ totalItemsInCart }}</span></h3>
      <h3>Prix HT: <span *ngIf="(subTotal$ | async) as subTotal">{{ subTotal | currency:'EUR':true }}</span></h3>
      <h3>Prix TTC: <span *ngIf="(totalWithTaxes$ | async) as totalWithTaxes">{{ totalWithTaxes | currency:'EUR':true }}</span></h3>

      <button class="primary-button" (click)="checkout()">Paiement</button>
    </div>
  </div>
</div>
